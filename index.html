<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>JuJube Linux</title>
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-dark.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/main.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>

      <header>
        <h1><img src="images/jujube-text.png" alt="JuJube Linux"><img height="20%" src="images/jujube-32x60.png" alt="JuJube Logo"></h1>
        <p>The Arch Linux based distro that runs upon any Linux distros without root access</p>
      </header>

      <div id="banner">
        <span id="logo"></span>

        <a href="https://github.com/fsquillace/jujube" class="button fork">View On GitHub</a>
        <div class="downloads">
          <span>Download images:</span>
          <ul>
            <li><a href="https://dl.dropboxusercontent.com/u/42449030/jujube/jujube-x86_64.tar.gz" class="button">x86_64</a></li>
            <li><a href="https://dl.dropboxusercontent.com/u/42449030/jujube/jujube-x86.tar.gz" class="button">x86</a></li>
            <li><a href="https://dl.dropboxusercontent.com/u/42449030/jujube/jujube-arm.tar.gz" class="button">ARM</a></li>
          </ul>
        </div>
      </div><!-- end banner -->

    <div class="wrapper">
      <nav>
        <ul></ul>
      </nav>
      <section>
        <h1>
<a id="jujube" class="anchor" href="#jujube" aria-hidden="true"><span class="octicon octicon-link"></span></a>JuJube</h1>

<p><strong>JuJube</strong>: the Arch Linux based distro that runs upon any Linux distros without root access</p>

<p><a href="https://travis-ci.org/fsquillace/jujube"><img src="https://api.travis-ci.org/fsquillace/jujube.png?branch=master" alt="Build status"></a></p>

<h2>
<a id="description" class="anchor" href="#description" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h2>

<p><strong>JuJube</strong> is a lightweight Arch Linux based distribution that allows to have
an isolated GNU/Linux environment inside any generic host GNU/Linux OS
and without the need to have root privileges for installing packages.</p>

<p>JuJube contains mainly the package managers (called pacman and yaourt) that allows to access
to a wide range of packages from the Arch Linux repositories.</p>

<p>The main advantages on using JuJube are:</p>

<ul>
<li>Install packages without root privileges.</li>
<li>Isolated environment in which you can install packages without affecting a production system.</li>
<li>Access to a wide range of packages in particular on GNU/Linux distros that may contain limited repositories (such as CentOS and RedHat).</li>
<li>Available for x86_64, x86 and ARM architectures but you can build your own image from scratch too!</li>
<li>All Arch Linux lovers can have their favourite distro everywhere!</li>
</ul>

<p>JuJube follows the <a href="https://wiki.archlinux.org/index.php/The_Arch_Way">Arch Linux philosophy</a>.</p>

<h2>
<a id="quickstart" class="anchor" href="#quickstart" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quickstart</h2>

<p>There are three different ways you can run JuJube:</p>

<ul>
<li>As normal user - Allow to make basic operations using <a href="https://wiki.archlinux.org/index.php/Proot">proot</a>:</li>
</ul>

<div class="highlight highlight-sh"><pre><code>jujube</code></pre></div>

<ul>
<li>As fakeroot - Allow to install/remove packages using <a href="https://wiki.archlinux.org/index.php/Proot">proot</a>:</li>
</ul>

<div class="highlight highlight-sh"><pre><code>jujube -f</code></pre></div>

<ul>
<li>As root - Allow to have fully root privileges inside JuJube environment using <a href="https://wiki.archlinux.org/index.php/Chroot">arch-chroot</a> (you need to be root for executing this):</li>
</ul>

<div class="highlight highlight-sh"><pre><code>jujube -r</code></pre></div>

<p>If the JuJube image has not been downloaded yet, the script will download
the JuJube image and will place it to the default directory ~/.jujube.
You can change the default directory by changing the environment variable <em>JUJUBE_HOME</em>.</p>

<p>If you are new on Archlinux and you are not familiar with <em>pacman</em> package manager
visit the <a href="https://wiki.archlinux.org/index.php/Pacman_Rosetta">pacman rosetta page</a>.</p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>Just clone the JuJube repo somewhere (for example in ~/jujube):</p>

<pre><code>git clone git://github.com/fsquillace/jujube ~/jujube
export PATH=~/jujube/bin:$PATH
</code></pre>

<p>Alternatively, another installation method would be to directly download the JuJube image and place it to the default directory ~/.jujube:</p>

<pre><code>ARCH=&lt;one of "x86_64", "x86", "arm"&gt;
mkdir ~/.jujube
curl https://dl.dropboxusercontent.com/u/42449030/jujube/jujube-${ARCH}.tar.gz | tar -xz -C ~/.jujube
export PATH=~/.jujube/opt/jujube/bin:$PATH
</code></pre>

<p>JuJube can works on GNU/Linux OS with kernel version greater or equal
2.6.0 (JuJube was not tested on kernel versions older than this) on 64 bit, 32 bit and ARM architectures.</p>

<h2>
<a id="advanced-usage" class="anchor" href="#advanced-usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Advanced usage</h2>

<h3>
<a id="build-image" class="anchor" href="#build-image" aria-hidden="true"><span class="octicon octicon-link"></span></a>Build image</h3>

<p>You can build a new JuJube image from scratch by running the following command:</p>

<pre><code>jujube -b [-n]
</code></pre>

<p>The script will create a directory containing all the essentials
files in order to make JuJube working properly (such as pacman, yaourt, arch-chroot and proot).
The option <code>-n</code> will skip the final validation tests if they are not needed.
Remember that the script to build the image must run in an Arch Linux OS with
arch-install-scripts, package-query, git and the base-devel packages installed.
To change the build directory just use the <em>JUJUBE_TEMPDIR</em> (by default /tmp).</p>

<p>After creating the image jujube-x86_64.tar.gz you can install it by running:</p>

<pre><code>jujube -i jujube-x86_64.tar.gz
</code></pre>

<p>Related wiki page:</p>

<ul>
<li><a href="https://github.com/fsquillace/jujube/wiki/How-to-build-a-JuJube-image-using-QEMU">How to build a JuJube image using QEMU</a></li>
</ul>

<h3>
<a id="bind-directories" class="anchor" href="#bind-directories" aria-hidden="true"><span class="octicon octicon-link"></span></a>Bind directories</h3>

<p>To bind a host directory to a guest location, you can use proot arguments:</p>

<pre><code>jujube -p "-b /mnt/mydata:/home/user/mydata"
</code></pre>

<p>Check out the proot options with:</p>

<pre><code>jujube -p "--help"
</code></pre>

<h3>
<a id="automatic-fallback-to-classic-chroot" class="anchor" href="#automatic-fallback-to-classic-chroot" aria-hidden="true"><span class="octicon octicon-link"></span></a>Automatic fallback to classic chroot</h3>

<p>Since the <a href="https://wiki.archlinux.org/index.php/Chroot">arch-chroot</a> may not work
on some distros, JuJube automatically tries to fallback to the classic chroot.</p>

<h3>
<a id="jujube-as-a-container" class="anchor" href="#jujube-as-a-container" aria-hidden="true"><span class="octicon octicon-link"></span></a>JuJube as a container</h3>

<p>Although JuJube has not been designed to be a complete container, it is even possible to
virtualize the process tree thanks to the <a href="https://wiki.archlinux.org/index.php/Systemd-nspawn">systemd container</a>.
The JuJube containter allows to run services inside the container that can be
visible from the host OS through the network.
The drawbacks of this are that the host OS must use systemd as a service manager,
and the container can only be executed using root privileges.</p>

<p>To boot a JuJube container:</p>

<pre><code>sudo systemd-nspawn -bD ~/.jujube
</code></pre>

<p>Related wiki page:</p>

<ul>
<li><a href="https://github.com/fsquillace/jujube/wiki/How-to-run-JuJube-as-a-container">How to run jujube as a container</a></li>
</ul>

<h2>
<a id="dependencies" class="anchor" href="#dependencies" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dependencies</h2>

<p>JuJube comes with a very short list of dependencies in order to be installed in most
of GNU/Linux distributions. The needed executables in the host OS are:</p>

<ul>
<li>bash</li>
<li>wget or curl</li>
<li>tar</li>
<li>mkdir</li>
<li>ln</li>
<li>chown (for root access only)</li>
</ul>

<p>The minimum recommended linux kernel is 2.6.0+</p>

<h2>
<a id="troubleshooting" class="anchor" href="#troubleshooting" aria-hidden="true"><span class="octicon octicon-link"></span></a>Troubleshooting</h2>

<h3>
<a id="cannot-use-aur-repository" class="anchor" href="#cannot-use-aur-repository" aria-hidden="true"><span class="octicon octicon-link"></span></a>Cannot use AUR repository</h3>

<ul>
<li>
<strong>Q</strong>: Why do I get the following error when I try to install a package with yaourt?</li>
</ul>

<pre><code>Cannot find the gzip binary required for compressing man and info pages.
</code></pre>

<ul>
<li>
<strong>A</strong>: JuJube comes with a very basic number of packages.
In order to install packages using yaourt you may need to install the package group <em>base-devel</em>
that contains all the essential packages for compiling source code (such as gcc, make, patch, etc):</li>
</ul>

<pre><code>    pacman -S base-devel
</code></pre>

<h3>
<a id="kernel-too-old" class="anchor" href="#kernel-too-old" aria-hidden="true"><span class="octicon octicon-link"></span></a>Kernel too old</h3>

<ul>
<li>
<strong>Q</strong>: Why do I get the error: "FATAL: kernel too old"?</li>
<li>
<strong>A</strong>: This is because the executable from the precompiled package cannot
properly run if the kernel is old.
JuJube contains two different PRoot binaries, and one of them is highly compatible
with old linux kernel versions. JuJube will detect which PRoot binary need to be
executed but you may need to specify the PRoot <em>-k</em> option if the guest rootfs
requires a newer kernel version:</li>
</ul>

<pre><code>    jujube -p "-k 3.10"
</code></pre>

<p>In order to check if an executable inside JuJube environment can be compatible
with the kernel of the host OS just use the <em>file</em> command, for instance:</p>

<pre><code>    file ~/.jujube/usr/bin/bash
    ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked
    (uses shared libs), for GNU/Linux 2.6.32,
    BuildID[sha1]=ec37e49e7188ff4030052783e61b859113e18ca6, stripped
</code></pre>

<p>From the output you can see what is the minimum recommended Linux kernel version.</p>

<h3>
<a id="suid-permissions" class="anchor" href="#suid-permissions" aria-hidden="true"><span class="octicon octicon-link"></span></a>SUID permissions</h3>

<ul>
<li>
<strong>Q</strong>: Why I do not have permissions for ping?</li>
</ul>

<pre><code>    ping www.google.com
    ping: icmp open socket: Operation not permitted
</code></pre>

<ul>
<li>
<strong>A</strong>: The ping command uses <em>suid</em> permissions that allow to execute the command using
root privileges. The fakeroot mode is not able to execute a command set with suid,
and you may need to use root privileges. There are other few commands that
have <em>suid</em> permission, you can list the commands from your JuJube environment
with the following command:</li>
</ul>

<pre><code>    find /usr/bin -perm +4000
</code></pre>

<h3>
<a id="no-characters-are-visible-on-a-graphic-application" class="anchor" href="#no-characters-are-visible-on-a-graphic-application" aria-hidden="true"><span class="octicon octicon-link"></span></a>No characters are visible on a graphic application</h3>

<ul>
<li><p><strong>Q</strong>: Why I do not see any characters in the application I have installed?</p></li>
<li><p><strong>A</strong>: This is probably because there are no 
<a href="https://wiki.archlinux.org/index.php/Font_Configuration">fonts</a> installed in
the system.</p></li>
</ul>

<p>To quick fix this, you can just install a fonts package:</p>

<pre><code>    pacman -S gnu-free-fonts
</code></pre>

<h3>
<a id="differences-between-filesystem-and-package-ownership" class="anchor" href="#differences-between-filesystem-and-package-ownership" aria-hidden="true"><span class="octicon octicon-link"></span></a>Differences between filesystem and package ownership</h3>

<ul>
<li>
<strong>Q</strong>: Why do I get warning when I install a package using root privileges?</li>
</ul>

<pre><code>    pacman -S systat
    ...
    warning: directory ownership differs on /usr/
    filesystem: 1000:100  package: 0:0
    ...
</code></pre>

<ul>
<li>
<strong>A</strong>: In these cases the package installation went smoothly anyway.
This should happen every time you install package with root privileges
since JuJube will try to preserve the JuJube environment by assigning ownership
of the files to the real user.</li>
</ul>

<h3>
<a id="no-servers-configured-for-repository" class="anchor" href="#no-servers-configured-for-repository" aria-hidden="true"><span class="octicon octicon-link"></span></a>No servers configured for repository</h3>

<ul>
<li>
<strong>Q</strong>: Why I cannot install packages?</li>
</ul>

<pre><code>    pacman -S lsof
    Packages (1): lsof-4.88-2

    Total Download Size:    0.09 MiB
    Total Installed Size:   0.21 MiB

    error: no servers configured for repository: core
    error: no servers configured for repository: community
    error: failed to commit transaction (no servers configured for repository)
    Errors occurred, no packages were upgraded.
</code></pre>

<ul>
<li>
<strong>A</strong>: You need simply to update the mirrorlist file according to your location:</li>
</ul>

<pre><code>    # Uncomment the repository line according to your location
    nano /etc/pacman.d/mirrorlist
    pacman -Syy
</code></pre>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>

<p>Copyright (c) 2012-2015</p>

<p>This program is free software; you can redistribute it and/or modify it
under the terms of the GNU Library General Public License as published
by the Free Software Foundation; either version 2, or (at your option)
any later version.</p>

<p>This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.</p>

<p>You should have received a copy of the GNU General Public License
along with this program.  If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.</p>

<h2>
<a id="author" class="anchor" href="#author" aria-hidden="true"><span class="octicon octicon-link"></span></a>Author</h2>

<p>Filippo Squillace <a href="mailto:feel.squally@gmail.com">feel.squally@gmail.com</a></p>

<h2>
<a id="www" class="anchor" href="#www" aria-hidden="true"><span class="octicon octicon-link"></span></a>WWW</h2>

<p><a href="https://github.com/fsquillace/jujube">https://github.com/fsquillace/jujube</a></p>

<h2>
<a id="last-words" class="anchor" href="#last-words" aria-hidden="true"><span class="octicon octicon-link"></span></a>Last words</h2>

<p>Quote of the <a href="http://en.wikipedia.org/wiki/Ziziphus_lotus">lotus</a> (a selvatic jujube plant)</p>

<blockquote>
  <p>Per nove infausti dì sul mar pescoso</br>
i venti rei mi trasportaro. Al fine</br>
nel decimo sbarcammo in su le rive</br>
de’ Lotofági, un popolo, a cui cibo</br>
È d’una pianta il florido germoglio.</br>
...</br>
...</br>
Partiro e s’affrontaro a quella gente,</br>
che, lunge dal voler la vita loro,</br>
il dolce loto a savorar lor porse.</br>
chiunque l’esca dilettosa, e nuova</br>
gustato avea, con le novelle indietro</br>
non bramava tornar: colà bramava</br>
starsi, e, mangiando del soave loto,</br>
la contrada natia sbandir dal petto.</p>
</blockquote>

<p>verse 105-123, Homer, from <a href="http://it.wikisource.org/wiki/Odissea/Libro_IX">Odyssey Book IX</a>
(<a href="http://en.wikisource.org/wiki/The_Odyssey_(Butler)/Book_IX">en</a>)</p>
      </section>
      <footer>
        <p>Project maintained by <a href="https://github.com/fsquillace">fsquillace</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-63054253-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
